{"ast":null,"code":"import _slicedToArray from\"/Users/mlab/Project/courseProject/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// Every user has its personal page where they can mange list of collections (create new, delete, or edit) — each collection in the list is a link to the collection page that contains table of items with sorting/filtering and capabilities to create new item, edit or delete existing item).\nimport{useEffect,useState}from\"react\";import{Col,Container,Row,Card,Button,Table}from\"react-bootstrap\";import{Link}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import{getUserDetails}from\"../Redux/Actions/UserActions\";import Error from\"../components/ui/Error\";import Spiner from\"../components/ui/Spiner\";import UserProfileUpdate from\"./UserProfileUpdate\";import{getListMyOrders}from\"../Redux/Actions/OrderActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserPage=function UserPage(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),updateForm=_useState2[0],setUpdateForm=_useState2[1];var dispatch=useDispatch();var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var userDetails=useSelector(function(state){return state.userDetails;});var detailsError=userDetails.error,detailsLoading=userDetails.loading;var orderListMy=useSelector(function(state){return state.orderListMy;});var myListError=orderListMy.error,myListLoading=orderListMy.loading,orders=orderListMy.orders;// const userUpdateProfile = useSelector((state) => state.userUpdateProfile);\n// const {loading: updatedLoading } = userUpdateProfile;\nvar updateFormHandler=function updateFormHandler(){setUpdateForm(function(prev){return setUpdateForm(!prev);});};useEffect(function(){dispatch(getUserDetails(\"profile\"));dispatch(getListMyOrders());},[dispatch]);return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Button,{onClick:updateFormHandler,children:\"Update Profile\"}),detailsError&&/*#__PURE__*/_jsx(Error,{variant:\"alert-danger\",children:detailsError}),detailsLoading&&/*#__PURE__*/_jsx(Spiner,{}),updateForm&&/*#__PURE__*/_jsx(UserProfileUpdate,{})]})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Card.Title,{children:[\"The \",userInfo.name,\"'s Collection List\"]})})})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(Card.Text,{children:myListLoading?/*#__PURE__*/_jsx(Spiner,{}):myListError?/*#__PURE__*/_jsx(Error,{children:myListError}):/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Id\"}),/*#__PURE__*/_jsx(\"th\",{children:\"User Id\"})]})}),orders.map(function(item){return/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:\"/orders/\".concat(item._id),children:item._id})}),/*#__PURE__*/_jsx(\"td\",{children:item.user})]})},item._id);})]})})}),/*#__PURE__*/_jsxs(Card.Footer,{children:[\"Collections : \",orders?orders.length:0]})]})})})]});};export default UserPage;","map":{"version":3,"names":["useEffect","useState","Col","Container","Row","Card","Button","Table","Link","useDispatch","useSelector","getUserDetails","Error","Spiner","UserProfileUpdate","getListMyOrders","UserPage","updateForm","setUpdateForm","dispatch","userLogin","state","userInfo","userDetails","detailsError","error","detailsLoading","loading","orderListMy","myListError","myListLoading","orders","updateFormHandler","prev","name","map","item","_id","user","length"],"sources":["/Users/mlab/Project/courseProject/client/src/pages/UserPage.js"],"sourcesContent":["// Every user has its personal page where they can mange list of collections (create new, delete, or edit) — each collection in the list is a link to the collection page that contains table of items with sorting/filtering and capabilities to create new item, edit or delete existing item).\nimport { useEffect , useState} from \"react\";\nimport { Col, Container, Row, Card, Button, Table } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getUserDetails } from \"../Redux/Actions/UserActions\";\nimport Error from \"../components/ui/Error\";\nimport Spiner from \"../components/ui/Spiner\";\nimport UserProfileUpdate from \"./UserProfileUpdate\";\nimport { getListMyOrders } from \"../Redux/Actions/OrderActions\";\n\nconst UserPage = () => {\n  const [updateForm, setUpdateForm] = useState(false);\n  const dispatch = useDispatch();\n\n  const userLogin = useSelector((state) => state.userLogin);\n  const { userInfo } = userLogin;\n\n  const userDetails = useSelector((state) => state.userDetails);\n  const { error: detailsError, loading: detailsLoading } = userDetails;\n\n  const orderListMy = useSelector((state) => state.orderListMy);\n  const { error: myListError, loading: myListLoading, orders } = orderListMy;\n\n  // const userUpdateProfile = useSelector((state) => state.userUpdateProfile);\n  // const {loading: updatedLoading } = userUpdateProfile;\n  const updateFormHandler = () => {\n    setUpdateForm(prev => setUpdateForm(!prev))\n  }\n\n  useEffect(() => {\n    dispatch(getUserDetails(\"profile\"));\n    dispatch(getListMyOrders());\n  }, [dispatch]);\n\n  return (\n    <Container>\n      <Row>\n        <Col>\n          \n\n          <Card>\n          <Button onClick={updateFormHandler}>Update Profile</Button>\n            {detailsError && (\n              <Error variant={\"alert-danger\"}>{detailsError}</Error>\n            )}\n            {detailsLoading && <Spiner />}\n            {updateForm && (\n            <UserProfileUpdate />\n            )}\n          </Card>\n        </Col>\n      </Row>\n      <Row>\n        <Col>\n          <Card>\n            <Card.Body>\n              <Card.Title>The {userInfo.name}'s Collection List</Card.Title>\n            </Card.Body>\n          </Card>\n        </Col>\n      </Row>\n\n      <Row>\n        <Col>\n          <Card>\n            \n            <Card.Body>\n              <Card.Text>\n                {myListLoading ? (\n                  <Spiner />\n                ) : myListError ? (\n                  <Error>{myListError}</Error>\n                ) : (\n                  <Table striped bordered hover>\n                    <thead>\n                      <tr>\n                        <th>Id</th>\n                        <th>User Id</th>\n                      </tr>\n                    </thead>\n                    {orders.map((item) => (\n                      <tbody key={item._id}>\n                        <tr>\n                          <td>\n                            <Link to={`/orders/${item._id}`}>\n                            {item._id}\n                            </Link>\n                            </td>\n                          <td>{item.user}</td>\n                        </tr>\n                      </tbody>\n                    ))}\n                  </Table>\n                )}\n              </Card.Text>\n            </Card.Body>\n            <Card.Footer>\n              Collections : {orders ? orders.length : 0}\n            </Card.Footer>\n          </Card>\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n\nexport default UserPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}