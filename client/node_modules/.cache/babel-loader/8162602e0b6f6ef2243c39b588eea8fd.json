{"ast":null,"code":"import _toConsumableArray from\"/Users/mlab/Project/courseProject/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import{useEffect}from\"react\";import{Col,Container,Row,Card,Table,Button}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import{Link,useParams,useLocation,useNavigate}from\"react-router-dom\";import{addToCollection,removeFromCollection}from\"../Redux/Actions/CollectionActions\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Collection=function Collection(){var dispatch=useDispatch();var _useLocation=useLocation(),search=_useLocation.search;var navigate=useNavigate();var _useParams=useParams(),id=_useParams.id;var productId=id;var qty=search?Number(search.split(\"=\")[1]):1;var collection=useSelector(function(state){return state.collection;});var collectionItems=collection.collectionItems;var removeFromCollectionHandle=function removeFromCollectionHandle(productId){dispatch(removeFromCollection(productId));};useEffect(function(){if(productId){dispatch(addToCollection(productId,qty));}},[dispatch,productId,qty]);var checkOutHandler=function checkOutHandler(e){e.preventDefault();navigate(\"/placeorder\");};return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(Card.Title,{children:[\" Products (\",collectionItems.length,\")\"]}),collectionItems.length===0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Your collection is empty\"}),/*#__PURE__*/_jsx(Link,{to:\"/products\",children:/*#__PURE__*/_jsx(Button,{children:\"Create new Collection\"})})]}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Product Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Qty\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Collection image\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Edit\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Remove\"})]})}),collectionItems.map(function(item){return/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"1\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:\"/products/\".concat(productId),children:\"Product 1\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"select\",{value:item.qty,onChange:function onChange(e){return dispatch(addToCollection(item.product,Number(e.target.value)));},children:_toConsumableArray(Array(item.countInStock).keys()).map(function(p){return/*#__PURE__*/_jsx(\"option\",{value:p+1,children:p+1},p+1);})})}),/*#__PURE__*/_jsx(\"td\",{children:item.productId}),/*#__PURE__*/_jsxs(\"td\",{children:[item.price,\"$\"]}),/*#__PURE__*/_jsx(\"td\",{children:item.image}),/*#__PURE__*/_jsx(\"td\",{children:\"Edit\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return removeFromCollectionHandle(item.product);},children:\"Remove\"})})]})},item.productId);})]})}),/*#__PURE__*/_jsx(Card.Title,{children:/*#__PURE__*/_jsx(Button,{onClick:checkOutHandler,children:\"Create Collection\"})})]})})})})});};export default Collection;","map":{"version":3,"names":["useEffect","Col","Container","Row","Card","Table","Button","useDispatch","useSelector","Link","useParams","useLocation","useNavigate","addToCollection","removeFromCollection","Collection","dispatch","search","navigate","id","productId","qty","Number","split","collection","state","collectionItems","removeFromCollectionHandle","checkOutHandler","e","preventDefault","length","map","item","product","target","value","Array","countInStock","keys","p","price","image"],"sources":["/Users/mlab/Project/courseProject/client/src/pages/Collections.js"],"sourcesContent":["import { useEffect } from \"react\";\nimport { Col, Container, Row, Card, Table, Button } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link, useParams, useLocation, useNavigate } from \"react-router-dom\";\n\nimport { addToCollection,removeFromCollection } from \"../Redux/Actions/CollectionActions\";\n\nconst Collection = () => {\n  const dispatch = useDispatch();\n  const { search } = useLocation();\n  const navigate = useNavigate()\n\n  const { id } = useParams();\n  const productId = id;\n\n  const qty = search ? Number(search.split(\"=\")[1]) : 1;\n\n  const collection = useSelector((state) => state.collection);\n  const { collectionItems } = collection;\n\n  const removeFromCollectionHandle = (productId) => {\n    dispatch(removeFromCollection(productId))\n  };\n\n\n  useEffect(() => {\n    if (productId) {\n      dispatch(addToCollection(productId, qty));\n    }\n  }, [dispatch, productId, qty]);\n\n  const checkOutHandler = (e) => {\n  e.preventDefault()\n  navigate(`/placeorder`)\n\n  }\n\n  return (\n    <Container>\n      <Row>\n        <Col>\n          <Card>\n            <Card.Body>\n              <Card.Title> Products ({collectionItems.length})</Card.Title>\n              {collectionItems.length === 0 ? (\n                <>\n                  <h1>Your collection is empty</h1>\n                  <Link to={`/products`}>\n                  <Button>Create new Collection</Button>\n                  </Link>\n                </>\n              ) : (\n                <>\n                  <Table striped bordered hover>\n                    <thead>\n                      <tr>\n                        <th>#</th>\n                        <th>Product Name</th>\n                        <th>Qty</th>\n                        <th>Price</th>\n                        <th\n\n                        // dataFormat={imageFormatter}\n                        >\n                          Collection image\n                        </th>\n                        <th>Edit</th>\n                        <th>Remove</th>\n                      </tr>\n                    </thead>\n                    {collectionItems.map((item) => (\n                      <tbody key={item.productId}>\n                        <tr>\n                          <td>1</td>\n                          <td>\n                            <Link to={`/products/${productId}`}>Product 1</Link>\n                          </td>\n                          <td>\n                            <select\n                              value={item.qty}\n                              onChange={(e) =>\n                                dispatch(\n                                  addToCollection(\n                                    item.product,\n                                    Number ( e.target.value)\n                                  )\n                                )\n                              }\n                            >\n                              {[...Array(item.countInStock).keys()].map((p) => (\n                                <option key={p + 1} value={p + 1}>\n                                  {p + 1}\n                                </option>\n                              ))}\n                            </select>\n                          </td>\n                          <td>{item.productId}</td>\n                          <td>{item.price}$</td>\n                          <td>{item.image}</td>\n                          <td>Edit</td>\n                          <td>\n                            <Button\n                              onClick={() => removeFromCollectionHandle(item.product)}\n                            >\n                              Remove\n                            </Button>\n                          </td>\n                        </tr>\n                      </tbody>\n                    ))}\n                  </Table>\n                </>\n              )}\n\n              <Card.Title>\n              \n               <Button onClick={checkOutHandler}>Create Collection</Button>\n              </Card.Title>\n            </Card.Body>\n          </Card>\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n\nexport default Collection;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}